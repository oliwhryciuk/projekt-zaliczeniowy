{% extends "base.html" %}

{% block title %}Medium Bags - Bagz{% endblock %}

{% block content %}
<style>
    .bags-list { 
        max-width: 1000px; 
        margin: 40px auto; 
        background: var(--white); 
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06); 
        padding: 50px;
    }
    .bags-list h2 { 
        margin: 0 0 30px 0;
        font-size: 1.8em;
        color: var(--primary);
        border-bottom: 2px solid var(--accent);
        padding-bottom: 15px;
    }
    .bag-item { 
        display: flex; 
        align-items: center; 
        gap: 20px; 
        border-bottom: 1px solid var(--border); 
        padding: 25px 0;
        transition: all 0.3s;
    }
    .bag-item:hover {
        background: var(--light-bg);
        padding-left: 10px;
        padding-right: 10px;
        margin-left: -10px;
        margin-right: -10px;
    }
    .bag-item:last-child { 
        border-bottom: none; 
    }
    .bag-photo { 
        width: 120px; 
        height: 120px; 
        object-fit: cover; 
        background: var(--light-bg);
        flex-shrink: 0;
        border: 1px solid var(--border);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        transition: all 0.3s;
    }
    .bag-item:hover .bag-photo {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    }
    .bag-info { 
        flex: 1;
        min-width: 0;
    }
    .bag-title { 
        font-size: 1.1em; 
        font-weight: 600;
        margin-bottom: 8px;
    }
    .bag-title a { 
        color: var(--primary); 
        text-decoration: none;
        transition: all 0.3s;
    }
    .bag-title a:hover { 
        color: var(--accent);
    }
    .bag-meta { 
        color: var(--text-light); 
        font-size: 0.95em; 
    }
    .bag-price {
        font-size: 1.15em;
        font-weight: 600;
        color: var(--accent);
        margin-top: 8px;
    }
    .return-btn { 
        display: inline-block; 
        margin-top: 30px; 
        padding: 14px 28px; 
        background: var(--accent); 
        color: var(--white); 
        text-decoration: none; 
        font-weight: 600; 
        text-align: center; 
        transition: all 0.3s;
        letter-spacing: 0.5px;
    }
    .return-btn:hover { 
        background: var(--accent-dark); 
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(184, 92, 117, 0.25);
    }
</style>
<div class="bags-list">
    <h2>Medium Bags</h2>
    <div id="bags-list"></div>
    <a href="{% url 'store:main-page' %}" class="return-btn">Return to Homepage</a>
</div>
<script>
    async function fetchBags() {
        const resp = await fetch('/api/bags/');
        const bags = await resp.json();
        const list = document.getElementById('bags-list');
        list.innerHTML = '';
        bags.filter(bag => bag.size === 2).forEach(bag => {
            const div = document.createElement('div');
            div.className = 'bag-item';
            let photoPath = '';
            if (bag.photo) {
                if (bag.photo.startsWith('/media/')) {
                    photoPath = bag.photo;
                } else if (bag.photo.startsWith('media/')) {
                    photoPath = '/' + bag.photo;
                } else {
                    photoPath = '/media/' + bag.photo;
                }
            }
            div.innerHTML = `
                <img class="bag-photo" src="${photoPath}" alt="Bag photo" onerror="this.style.display='none'">
                <div class="bag-info">
                    <div class="bag-title"><a href="/bags/${bag.id}/">${bag.brand} ${bag.model_name}</a></div>
                    <div class="bag-meta">Price: ${bag.price} z≈Ç</div>
                </div>
            `;
            list.appendChild(div);
        });
    }
    window.onload = fetchBags;
</script>
{% endblock %}
